os: linux
language: cpp
sudo: required
branches:
  only:
  - "/^test.*$/"
  - "/^v.*$/"
services:
- docker
addons:
  apt:
    update: true
env:
  global:
  - DOCKERHUB='chalmersfsd'
  - IMAGE=`echo ${TRAVIS_REPO_SLUG#*/}`
  - secure: CksJpliTRPfdr84RrfJoV+IgtV6YJ1ZVB2me5fZzeVt/QVQiwin6FKG8i7Q2IkkMxgd98nEdmtMEuNenfHO304E31Bgtrazox4R54gezT1qgI+nzcwW90fESn7xumV57AT8ZIB516/DHOXs25E9KZCuncDWSA/EvwlyoM2hyAO7ZmlINLPu43PKyk/i64A+PPIWUAc9dqXC5NUIWZs4jIrildiZCHI17FlSFswM1/CqMBn7+3ERlJ+crjkxYo5DKC4yzk1jRTZ/Z2cD+XRuDdVdBnBa0RF0We6qsG//p00oeek2HqXamtB73yjSgXgxPlw/LVUuCHdDPKHQbBwi91STpvNNnEh2rX9qWJwE4ccpqsiL8Ij4R01TcHmlxPWTdfIDkwtSY4nQ6XM59ySnE1f9StnrnRJ3ugWgTwnKeIDdAObZo8hFwM9szBPAomjrCZms7l/bHaorMF7sMyCeMBBd0nBeYTrul+GbJFwcQHuepWlSug25OuztjCBo6eYi1CivF+UaXRnWViwOCuUI1O9EY+z/4o5QKzQiK1O+lTm8n+FBtD+vYerDM+9yGGGtlX+DqMzpVJ7K1H8blxKj3hVpgRSTsMk9H1QRHErn+zDIn/iXktajljK/VehEB3ntVYyRF5AAFV/o0b2kUCel9LlH8emobkiPTSERVWiy3aVk=
  - secure: YO/izJp7imhK8wWjBoOEu+pTHo4M9ym83AVgBI+SHaxPfb3VjAoS0iu59RJk0kReZy9oNoDaD+n/73Okw7+Zr0YdkhiFkp2nfqpogYedR6ddHDL7dBVLxo2g69CJsmOyavnmDjVM54LihO5Oy5rNF6Yizi1R+05FS0AqhJbsVrxeZ5NXbX2jk/lElJ8sgZqxsrh3lVO5IMh5Y0eGjQvtaywadfCEG6YQkO43M+Dk8I+nRShvlj6R2YODCygx3o2WvlClnFDKGS7uHcL+IIjkD5PD3vZ4UT8yDe82Onf5RObyjrW45uKTxT2yEgSTM1Wa4fYQxrdWcNlbBIGlC1vUGgX81Ug4Kh5WFXHlhZ+U6vxh0rhkk0QuEcCNtuOTMV8JaUrcjwZ2cSh1gYmMgy1uryow1WhSQCbV/PHOIWf1i16tZ2GwAjU0UEOTQb1mr2WWA/VzHa6cQz+1zNZ2voqb8UnzBkTqhoYil6cUcbJDPhM8rdafBxvILCok7UAmk9ZJkSRjRva8DqOUtXV1OZOOEEVwJZsyIg4nKve/kKuJ7lwvG3AOS+zi0Fyxq+Gl3S3e9Z+aDdR1Gvqs1fHrah3sgu9kobVaH7SOVXEqwvdw76v3gfjaxG56LRmTUgvd8Evu1bv99jy5QPJ2uliaNl9A+nfYKfwuB1OAQ5NvLUnaghw=
install:
- docker build -f Dockerfile.amd64 -t ${IMAGE} .
script: skip
after_success:
- echo "$DOCKER_PASS" | docker login -u "$DOCKER_USER" --password-stdin
- if [[ "${TRAVIS_BRANCH}" == *test* ]]; then docker tag ${IMAGE} ${DOCKERHUB}/${IMAGE}:${TRAVIS_BRANCH}${TRAVIS_BUILD_NUMBER};
  docker push ${DOCKERHUB}/${IMAGE}:${TRAVIS_BRANCH}${TRAVIS_BUILD_NUMBER}; echo "${DOCKERHUB}/${IMAGE}:${TRAVIS_BRANCH}${TRAVIS_BUILD_NUMBER}";
  else docker tag ${IMAGE} ${DOCKERHUB}/${IMAGE}:${TRAVIS_BRANCH}; docker push ${DOCKERHUB}/${IMAGE}:${TRAVIS_BRANCH};
  echo "${DOCKERHUB}/${IMAGE}:${TRAVIS_BRANCH}"; fi
notifications:
  email:
    on_success: never
    on_failure: never
